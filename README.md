## Учебный проект с использованием Docker, Airflow, Postgresql

## Краткое описание проекта:
В данном проекте с помощью `Airflow`, развёрнутом в `Docker`, происходит помесячная выгрузка данных **parquet** [файлов](https://www.nyc.gov/site/tlc/about/tlc-trip-record-data.page), содержащих информацию о поездках в жёлтых такси Нью-Йорка. Файлы загружаются в локальную БД Postgre.

## Для работы потребутеся установка следующих программ:
* Python
* DBeaver
* Docker 

## Начинаем работу:

1. Склонируйте репозиторий:

```
git clone https://github.com/citizenKC/airflow_project.git

```
2. В папке проекта создайте файл `.env`. Запустите следующую команду:

```
echo -e "AIRFLOW_UID=$(id -u)" >> .env

```
Далее, в этот файл добавьте данные для доступа к БД. `****` - заполняете сами:


```
#Логин и пароль должны совпадать
PG_USER= ****
PG_PASS= ****
#Название БД выбираете произвольно, для нас может быть актуальным название ny_taxi
PG_DB= ****
#Порт БД
PG_PORT= ****

```
3. Соберите образ и запустите контейнеры последовательно выполнив следующие комманды:
```
docker-compose build

docker-compose up -d 
```
4. После успешного выполнения комманд в `Docker'e` Вы увидите активные контейнеры:

![Screenshot](https://cloud.mail.ru/public/3sRZ/HaPHF68VY)

Если все контейнеры исправно работают - откройте DBeaver, создайте подключение к базе с именем, логином и паролем которые вы указывали в `env` файле. Создайте таблицу используя код из файла init.sql, что находится в папке sql, которая в свою очередь лежит в папке вашего проекта. 


